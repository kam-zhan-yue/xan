---
import BlogListItem from '../components/BlogListItem.astro'
import BlogList from '../components/BlogList.astro'

const filterAndSort = (blogs, category: string) => {
  return blogs.filter(blog => blog.frontmatter.category === category).sort((a, b) => {
    const aDate = new Date(a.frontmatter.published)
    const bDate = new Date(b.frontmatter.published)
    return bDate - aDate
  })
}

const blogs = Object.values(import.meta.glob('../pages/blog/*/index.md', { eager: true }))
const programmingBlogs = filterAndSort(blogs, 'programming')
---
<BlogList title="Programming">
  {programmingBlogs.map(blog => <BlogListItem to={blog.url} title={blog.frontmatter.title} published={blog.frontmatter.published}/>)} 
</BlogList>
